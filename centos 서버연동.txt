sudo yum -y install httpd (아파치 다운로드)
httpd -v (버전확인)
sudo systemctl start httpd (아파치 실행)
sudo systemctl status httpd (아파치 현재 상태 확인)
sudo systemctl stop/restart httpd (아파치 멈춤, 재시작)
크롬으로 서버 확인 (3.35.137.251) 

sudo yum install php (php 다운로드)
php -v (php 버전확인)
sudo systemctl restart httpd (아파치 재시작)

sudo yum install php-mysqli (mysql 모듈 설치)
sudo systemctl restart httpd (아파치 재시작)

sudo yum install git (git 설치) 
git --version (버전확인)
sudo systemctl restart httpd (아파치 재시작)

-----------------------------------------------------------

centos 서버연동
1. php.ini파일과 httpd.conf 파일 환경설정 변경 
httpd.conf 파일
sudo vi /etc/httpd/conf/httpd.conf 파일
163 <IfModule dir_module>
164     DirectoryIndex index.html index.html.var index.php index.php3
165 </IfModule> 

285 AddType application/x-httpd-php .php .html .htm .inc
286 AddType application/x-httpd-php-source .phps

sudo systemctl restart httpd (아파치 재시작)

sudo vi /var/www/html/phpinfo.php
<?php phpinfo(); ?>

크롬 3.35.137.251/phpinfo.php 확인 

php.ini 파일
sudo vi /etc/php.ini 
date.timezone = Asia/Seoul 
short_open_tag = On 

sudo systemctl restart httpd (아파치 재시작)

2. centos의 /home 디렉터리를 기본 웹 페이지로 변경하려면 권한문제로 오류가 생겨서 가상트리를 생성 
/ect/httpd/conf 폴더에 extra파일 생성
cd /etc/httpd/conf
sudo mkdir extra
shdo vi httpd-vhosts.conf

httpd-vhosts.conf 파일 생성
<Directory "var/www/html/*">
    Options FollowSymLinks
    AllowOverride All
    Order allow,deny
    Allow from all
</Directory>

NameVirtualHost *:80
<VirtualHost *:80>
   # DocumentRoot /home/
    DocumentRoot /home/juvisnext/centernext/
   # DocumentRoot /home/juvis/consulting/html/
   # DocumentRoot /home/juvis/app/html/
   # DocumentRoot /home/juvis/newcounsel/html/
    ErrorLog "logs/erp.juvis.co.kr-error_log"
    CustomLog "logs/erp.juvis.co.kr-access_log" common
</VirtualHost>

3. httpd.conf 파일의 124번 줄 <Directory "/home"> 으로 변경 
sudo vi /etc/httpd/conf/httpd.conf
맨아래 추가
# Virtual hosts
Include conf/extra/httpd-vhosts.conf

4. /home 디렉토리에 index.php 생성해서 크롬으로 확인
cd /home 
sudo touch index.php 
크롬으로 확인 -> 403 퍼미션 오류

sudo chcon -t httpd_sys_content_t index.php 
: AWLinux에서 파일 권한을 변경해주는 명령어로 
ls -Z /home/index.php
ls -Z | grep php 명령어로 파일의 권한을 확인해볼 수 있다
권한이 변경되기 전 : default_t
권한 변경 httpd_sys_content_t
-> 아파치에서 해당 파일과 폴더 접근이 가능, 크롬으로 확인

5. Git 브랜치 가져오기
git init : git 레포지토리 생성
git remote add origin http://61.100.11.152:9001/juvis-corp/juvis_erp.git
git remote -> origin 생성 확인 
git fetch 
git checkout -t origin/center/mylee1 원격브랜치 mylee를 추적하는 로컬 브랜치 /center/mylee1 생성 
git branch : 현재 추적중인 로컬 브랜치 확인

centos/ 에 예외처리 .gitignore 파일 수정
**/centos/ -> 추가

git add . 
git commit -m ""
git push origin center/mylee1

tail -f /etc/httpd/logs/erp.juvis.co.kr-error_log : 에러 확인 
Permission denide -> chcon 권한 문제 

chcon -R -t httpd_sys_content_t juvisnext
chcon -R -t httpd_sys_content_t juvis
-> -R :  파일과 디렉토리에서 반복적으로 작동하도록하는 명령어, 주어진 디렉토리의 모든 파일과 하위 디렉토리내의 파일 및 모든 작업
 
------------------------------------------------------------------------------

DB ip 주소 변경 
PHP Warning:  mysql_connect(): Can't connect to MySQL server on '172.45.42.173' (13) in /home/juvis/library/cls_DBManager.php on line 123
에러 

telnet 172.45.42.173 3306 : 해당 ip가 접속이 되는지 확인, 접속 됌 -> selinux 보안 문제
setsebool -P httpd_can_network_connect 1

